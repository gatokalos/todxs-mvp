.texto-narrativo {
  position: absolute;
  bottom: 88%;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  text-align: center;
  z-index: 20;
}

.texto-narrativo h2 {
  font-size: clamp(16px, 3vw, 28px);
  margin: 0;
  color: white;
}

.texto-narrativo.especial h2 {
  animation: stretch 2s infinite alternate;
}

@keyframes stretch {
  from { letter-spacing: normal; }
  to   { letter-spacing: 0.3em; }
}


.tutorial-canon {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-rows: repeat(3, 1fr);
  grid-template-columns: repeat(3, 1fr);
  justify-items: center;
  align-items: center;
  background: #000;
  overflow: hidden;
}

/* Shape base */
.shape {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  transition: all 0.6s ease;
  position: relative;
}

/* Colores */
.shape.lila {
  background: #D9C4F3;
}
.shape.rosa {
  background: #F9B4D4;
}
.shape.naranja {
  background: #F9A374;
}

/* X y O encima */
.symbol {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 32px;
  font-weight: bold;
  color: #fff;
}

/* Texto narrativo */
.tutorial-text {
  grid-row: 3;
  grid-column: 1 / span 3;
  justify-self: center;
  align-self: end;
  margin-bottom: 40px;
  color: white;
  font-family: 'Arial Rounded MT Bold', system-ui;
  text-align: center;
}



.chaos-layer {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.chaos-symbol {
  position: absolute;
  font-size: 28px;
  font-weight: bold;
  color: rgba(255, 255, 255, 0.85);
  opacity: 0.7;
  animation: floatChaos 2s infinite alternate ease-in-out;
  user-select: none;
}

.o-letter {
  opacity: 1;
}

.o-letter.fade-out {
  opacity: 0;
}

@keyframes floatChaos {
  0% { transform: translate(0, 0) rotate(0deg); }
  50% { transform: translate(-10px, -15px) rotate(-10deg); }
  100% { transform: translate(10px, 15px) rotate(10deg); }
}

/* Animaci√≥n tipo victoria */
@keyframes celebrate {
  0% { transform: scale(1) rotate(0deg); }
  25% { transform: scale(1.1) rotate(3deg); }
  50% { transform: scale(0.95) rotate(-3deg); }
  75% { transform: scale(1.05) rotate(2deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.shape {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  position: absolute;
  animation: celebrate 2s infinite ease-in-out;
}

/* Colores canon + posiciones */
.shape-lila {
  background: #D9C4F3;
  top: 10%;
  right: 35%;
}
.shape-rosa {
  background: #F9B4D4;
  top: 35%;
  left: 35%;
}
.shape-naranja {
  background: #F9A374;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
}

/* S√≠mbolos centrados */
.symbol {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 28px;
  font-weight: bold;
  color: #fff;
}


/* Bot√≥n centrado antes de abrir */
.entrar-btn {
  position: absolute;
  bottom: 15%;
  left: 50%;
  transform: translateX(-50%);
  background: #fff;
  color: #000;
  border: 2px solid #000;
  padding: 14px 28px;
  border-radius: 8px;
  font-size: 20px;
  cursor: pointer;
  opacity: 1;
  transition: opacity 0.5s ease;
  z-index: 10;
}

/* El bot√≥n desaparece al abrir */
.telon.open .entrar-btn {
  opacity: 0;
  pointer-events: none;
}


.glitch-base,
.glitch-red,
.glitch-blue {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: opacity 0.3s ease, filter 0.3s ease; /* üëà mucho m√°s corto */
}

.glitch-red {
  mix-blend-mode: screen;
  filter: drop-shadow(-2px 0 red);
  animation: rgbShift 0.2s infinite;
  opacity: 0.7;
}

.glitch-blue {
  mix-blend-mode: screen;
  filter: drop-shadow(2px 0 blue);
  animation: rgbShift 0.2s infinite reverse;
  opacity: 0.7;
}

.glitch-container.cutting .glitch-base,
.glitch-container.cutting .glitch-red,
.glitch-container.cutting .glitch-blue {
  animation: channelShift 0.12s infinite;
  opacity: 0;
  filter: contrast(160%) saturate(140%);
}

/* vibraci√≥n */
@keyframes channelShift {
  0% { transform: translate(0, 0); }
  25% { transform: translate(-2px, 1px); }
  50% { transform: translate(2px, -1px); }
  75% { transform: translate(-1px, 2px); }
  100% { transform: translate(0, 0); }
}

.glitch-container.cutting .telon {
  opacity: 1;
  transition: opacity 0.3s ease; /* üëà tambi√©n m√°s r√°pido */

}

.selector-clone {
  position: absolute;
  inset: 0;
  z-index: 0;
  filter: blur(3px) contrast(120%) saturate(150%);
}

.glitch-container.cutting .selector-clone {
  filter: none; /* üëà cuando se ‚Äúabre‚Äù se limpia */
  transition: filter 0.3s ease;
  opacity: 0; /* üëà se apaga cuando aparece el tel√≥n real */

}
/* Quantum cut flash */
.quantum-cut {
  animation: quantumFlash 0.3s ease-in-out;
}

@keyframes quantumFlash {
  0%   { background: #000; }
  50%  { background: #fff; }
  100% { background: #000; }
}

@keyframes fadeInTelon {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes blurPulse {
  0%, 100% { filter: blur(0px); }
  50% { filter: blur(6px); }
}

@keyframes breathe {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.2); }
}

@keyframes glitchMove {
  0% { transform: translate(0, 0) }
  20% { transform: translate(-3px, 2px) }
  40% { transform: translate(3px, -2px) }
  60% { transform: translate(-2px, -1px) }
  80% { transform: translate(2px, 3px) }
  100% { transform: translate(0, 0) }
}

@keyframes glitchStrobe {
  0% { opacity: 0; }
  25% { opacity: 1; }
  50% { opacity: 0; }
  75% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes glitchStrobe {
  0%   { transform: translate(0, 0) scale(1); opacity: 0.6; }
  25%  { transform: translate(-2px, 2px) scale(1.02); opacity: 0.8; }
  50%  { transform: translate(2px, -2px) scale(0.98); opacity: 0.5; }
  75%  { transform: translate(-1px, 1px) scale(1.01); opacity: 0.7; }
  100% { transform: translate(0, 0) scale(1); opacity: 0.6; }
}

@keyframes rgbShift {
  0%   { transform: translate(0, 0); }
  20%  { transform: translate(-2px, 1px); }
  40%  { transform: translate(6px, -1px); }
  60%  { transform: translate(-1px, -10px); }
  80%  { transform: translate(1px, 2px); }
  100% { transform: translate(0, 0); }
}

.fluir-text {
  font-size: 1.8rem;
  font-weight: bold;
  color: white;
  display: inline-block;
  transform-origin: center;
  transition: transform 0.8s ease, opacity 0.8s ease;
}

/* Cada estado de subStep */
.fluir-text.step-3 {
  transform: scaleX(1);
  opacity: 1;
}

.fluir-text.step-4 {
  transform: scaleX(2);
}

.fluir-text.step-5 {
  animation: glitchyMove 0.4s infinite;
}

.fluir-text.step-6 {
  transform: scaleX(4);
}

.fluir-text.step-7 {
  transform: scaleX(0.5);
  opacity: 0;
}

/* Glitch vibratorio */
@keyframes glitchyMove {
  0% { transform: translateX(0) scaleX(2.2); }
  25% { transform: translateX(-2px) scaleX(2.4); }
  50% { transform: translateX(2px) scaleX(2.1); }
  75% { transform: translateX(-1px) scaleX(2.3); }
  100% { transform: translateX(0) scaleX(2.2); }
}